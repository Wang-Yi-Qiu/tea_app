---

description: "Task list for WeChat tea e-commerce system implementation"
---

# Tasks: å¾®ä¿¡å°ç¨‹åºèŒ¶å¶ç”µå•†å¹³å°

**è¾“å…¥**: åŸºäºç°æœ‰è®¾è®¡æ–‡æ¡£ `/specs/1-tea-ecommerce/` çš„å®Œæ•´å®æ–½ä»»åŠ¡åˆ—è¡¨
**å…ˆå†³æ¡ä»¶**: plan.md (å·²å®Œæˆ), spec.md (ç”¨æˆ·æ•…äº‹), data-model.md (æ•°æ®æ¨¡å‹), contracts/ (APIåˆçº¦)
**æµ‹è¯•**: åŒ…å«å®Œæ•´çš„æµ‹è¯•ä»»åŠ¡ä»¥æ”¯æŒTDDå¼€å‘æ–¹æ³•

**ç»„ç»‡æ–¹å¼**: æŒ‰ç”¨æˆ·æ•…äº‹åˆ†ç»„ä»¥æ”¯æŒç‹¬ç«‹å®ç°å’Œæµ‹è¯•

## æ ¼å¼: `[ä»»åŠ¡ID] [P?] [ç”¨æˆ·æ•…äº‹] æè¿°åŒ…å«æ–‡ä»¶è·¯å¾„`

- **[P]**: å¯å¹¶è¡Œæ‰§è¡Œ (ä¸åŒæ–‡ä»¶ï¼Œæ— ä¾èµ–å…³ç³»)
- **[ç”¨æˆ·æ•…äº‹]**: æ ‡è®°ä»»åŠ¡å±äºå“ªä¸ªç”¨æˆ·æ•…äº‹ (ä¾‹å¦‚ US1, US2, US3...)
- åœ¨æè¿°ä¸­åŒ…å«ç²¾ç¡®çš„æ–‡ä»¶è·¯å¾„

## è·¯å¾„çº¦å®š

- **å°ç¨‹åºé¡¹ç›®**: `miniprogram/` (å‰ç«¯) + `cloud/` (äº‘å‡½æ•°åç«¯)
- **äº‘å‡½æ•°**: `cloud/functions/[åŠŸèƒ½å]/index.js`
- **å‰ç«¯é¡µé¢**: `miniprogram/pages/[æ¨¡å—]/[é¡µé¢]/`
- **å…¬å…±ç»„ä»¶**: `miniprogram/components/[ç»„ä»¶å]/`

---

## é˜¶æ®µ1: é¡¹ç›®è®¾ç½® (å…±äº«åŸºç¡€è®¾æ–½)

**ç›®æ ‡**: é¡¹ç›®åˆå§‹åŒ–å’ŒåŸºç¡€ç»“æ„

- [ ] T001 åˆ›å»ºå°ç¨‹åºåŸºç¡€é¡¹ç›®ç»“æ„
- [ ] T002 åˆå§‹åŒ–å¾®ä¿¡å°ç¨‹åºé¡¹ç›®é…ç½®
- [ ] T003 [P] é…ç½®TDesign UIç»„ä»¶åº“
- [ ] T004 [P] åˆ›å»ºäº‘å‡½æ•°åŸºç¡€ç»“æ„
- [ ] T005 [P] é…ç½®é¡¹ç›®ä»£ç è§„èŒƒå’Œæ ¼å¼åŒ–å·¥å…·

---

## é˜¶æ®µ2: åŸºç¡€è®¾æ–½ (é˜»å¡å…ˆå†³æ¡ä»¶)

**ç›®æ ‡**: æ ¸å¿ƒåŸºç¡€è®¾æ–½ï¼Œå¿…é¡»åœ¨ä»»ä½•ç”¨æˆ·æ•…äº‹å®ç°å‰å®Œæˆ
**âš ï¸ å…³é”®**: åœ¨æ­¤é˜¶æ®µå®Œæˆå‰ï¼Œæ— æ³•å¼€å§‹ä»»ä½•ç”¨æˆ·æ•…äº‹å·¥ä½œ

- [ ] T006 é…ç½®å¾®ä¿¡äº‘æ•°æ®åº“å®‰å…¨è§„åˆ™ (auth.isSystem == true)
- [ ] T007 [P] å®ç°äº‘å‡½æ•°è®¤è¯ä¸­é—´ä»¶ (OPENIDéªŒè¯)
- [ ] T008 [P] å®ç°ç®¡ç†å‘˜æƒé™éªŒè¯ (RBAC)
- [ ] T009 [P] è®¾ç½®é”™è¯¯å¤„ç†å’Œæ—¥å¿—åŸºç¡€è®¾æ–½
- [ ] T010 [P] é…ç½®ç¯å¢ƒå˜é‡ç®¡ç†
- [ ] T011 åˆ›å»ºæ•°æ®åº“åŸºç¡€é›†åˆå’Œç´¢å¼•
- [ ] T012 [P] å®ç°é€šç”¨æ•°æ®éªŒè¯å·¥å…·
- [ ] T013 [P] å®ç°é€šç”¨APIå“åº”æ ¼å¼

**æ£€æŸ¥ç‚¹**: åŸºç¡€è®¾æ–½å°±ç»ª - ç”¨æˆ·æ•…äº‹å®ç°ç°åœ¨å¯ä»¥å¹¶è¡Œå¼€å§‹

---

## é˜¶æ®µ3: ç”¨æˆ·æ•…äº‹1 - èŒ¶å¶äº§å“å‘ç°ä¸è§„æ ¼é€‰æ‹© (ä¼˜å…ˆçº§: P1) ğŸ¯ MVP

**ç›®æ ‡**: ç”¨æˆ·å¯ä»¥æµè§ˆèŒ¶å¶äº§å“å¹¶é€‰æ‹©å¤šç§è§„æ ¼å‚æ•°ï¼Œå®æ—¶æ˜¾ç¤ºåº“å­˜å’Œä»·æ ¼
**ç‹¬ç«‹æµ‹è¯•**: å¯é€šè¿‡æµè§ˆèŒ¶å¶ç›®å½•ã€é€‰æ‹©äº§å“è§„æ ¼ã€éªŒè¯å®æ—¶åº“å­˜/ä»·æ ¼æ˜¾ç¤ºå®Œæ•´æµ‹è¯•ï¼Œä¸æ¶‰åŠæ”¯ä»˜æˆ–è®¢å•

### ç”¨æˆ·æ•…äº‹1æµ‹è¯• (TDDå¼ºåˆ¶æ‰§è¡Œ) âš ï¸
> **æ³¨æ„**: é¦–å…ˆç¼–å†™è¿™äº›æµ‹è¯•ï¼Œç¡®ä¿åœ¨å®ç°å‰å¤±è´¥

- [ ] T014 [P] [US1] äº§å“åˆ—è¡¨APIåˆçº¦æµ‹è¯• in tests/contract/test_products_api.js
- [ ] T015 [P] [US1] SKUåº“å­˜æŸ¥è¯¢APIåˆçº¦æµ‹è¯• in tests/contract/test_sku_inventory.js
- [ ] T016 [P] [US1] äº§å“è¯¦æƒ…é¡µé¢é›†æˆæµ‹è¯• in tests/integration/test_product_detail.js

### ç”¨æˆ·æ•…äº‹1å®ç°

#### æ•°æ®æ¨¡å‹å±‚
- [ ] T017 [P] [US1] åˆ›å»ºTeaProductæ¨¡å‹ in cloud/src/models/TeaProduct.js
- [ ] T018 [P] [US1] åˆ›å»ºSKUæ¨¡å‹ in cloud/src/models/SKU.js
- [ ] T019 [US1] å®ç°åŠ¨æ€SKUçŸ©é˜µç”Ÿæˆç®—æ³• in cloud/src/services/skuService.js (ä¾èµ– T017, T018)

#### äº‘å‡½æ•°å±‚
- [ ] T020 [P] [US1] å®ç°getProductsäº‘å‡½æ•° in cloud/functions/getProducts/index.js
- [ ] T021 [P] [US1] å®ç°getProductDetailäº‘å‡½æ•° in cloud/functions/getProductDetail/index.js
- [ ] T022 [P] [US1] å®ç°getSKUInventoryäº‘å‡½æ•° in cloud/functions/getSKUInventory/index.js
- [ ] T023 [P] [US1] å®ç°searchProductsäº‘å‡½æ•° in cloud/functions/searchProducts/index.js

#### å‰ç«¯å±‚
- [ ] T024 [P] [US1] åˆ›å»ºäº§å“åˆ—è¡¨é¡µé¢ in miniprogram/pages/products/list/
- [ ] T025 [P] [US1] åˆ›å»ºäº§å“è¯¦æƒ…é¡µé¢ in miniprogram/pages/products/detail/
- [ ] T026 [US1] å®ç°è§„æ ¼é€‰æ‹©å™¨ç»„ä»¶ in miniprogram/components/spec-selector/
- [ ] T027 [P] [US1] åˆ›å»ºäº§å“æœç´¢é¡µé¢ in miniprogram/pages/products/search/

#### é›†æˆå’Œä¼˜åŒ–
- [ ] T028 [US1] æ·»åŠ äº§å“è¯¦æƒ…é¡µé¢éªŒè¯å’Œé”™è¯¯å¤„ç†
- [ ] T029 [US1] ä¸ºäº§å“åˆ—è¡¨æ·»åŠ LottieåŠ è½½åŠ¨ç”»
- [ ] T030 [US1] ä¸ºäº§å“å›¾ç‰‡æ·»åŠ object-fit: containæ ·å¼
- [ ] T031 [US1] ä¸ºäº§å“å¡ç‰‡æ·»åŠ hover-classäº¤äº’æ•ˆæœ
- [ ] T032 [US1] æ·»åŠ äº§å“æµè§ˆæ“ä½œçš„æ—¥å¿—è®°å½•

**æ£€æŸ¥ç‚¹**: æ­¤æ—¶ï¼Œç”¨æˆ·æ•…äº‹1åº”è¯¥å®Œå…¨åŠŸèƒ½åŒ–ä¸”å¯ç‹¬ç«‹æµ‹è¯•

---

## é˜¶æ®µ4: ç”¨æˆ·æ•…äº‹2 - å¾®ä¿¡æ”¯ä»˜ä¸è®¢å•åˆ›å»º (ä¼˜å…ˆçº§: P1)

**ç›®æ ‡**: ç”¨æˆ·å¯ä»¥é€šè¿‡å¾®ä¿¡æ”¯ä»˜å®Œæˆè´­ä¹°ï¼Œè®¢å•é€šè¿‡å®‰å…¨äº‘å‡½æ•°åˆ›å»º
**ç‹¬ç«‹æµ‹è¯•**: å¯é€šè¿‡åˆ›å»ºæ¨¡æ‹Ÿè®¢å•ã€å‘èµ·å¾®ä¿¡æ”¯ä»˜æµç¨‹ã€éªŒè¯è®¢å•çŠ¶æ€è½¬æ¢å®Œæ•´æµ‹è¯•ï¼Œæ— å¤–éƒ¨ä¾èµ–

### ç”¨æˆ·æ•…äº‹2æµ‹è¯• (TDDå¼ºåˆ¶æ‰§è¡Œ) âš ï¸

- [ ] T033 [P] [US2] è´­ç‰©è½¦ç®¡ç†APIåˆçº¦æµ‹è¯• in tests/contract/test_cart_api.js
- [ ] T034 [P] [US2] è®¢å•åˆ›å»ºAPIåˆçº¦æµ‹è¯• in tests/contract/test_order_create.js
- [ ] T035 [P] [US2] æ”¯ä»˜æµç¨‹é›†æˆæµ‹è¯• in tests/integration/test_payment_flow.js

### ç”¨æˆ·æ•…äº‹2å®ç°

#### æ•°æ®æ¨¡å‹å±‚
- [ ] T036 [P] [US2] åˆ›å»ºOrderæ¨¡å‹ in cloud/src/models/Order.js
- [ ] T037 [P] [US2] åˆ›å»ºOrderItemæ¨¡å‹ in cloud/src/models/OrderItem.js

#### äº‘å‡½æ•°å±‚
- [ ] T038 [P] [US2] å®ç°manageCartäº‘å‡½æ•° in cloud/functions/manageCart/index.js
- [ ] T039 [P] [US2] å®ç°createOrderäº‘å‡½æ•° in cloud/functions/createOrder/index.js
- [ ] T040 [P] [US2] å®ç°wechatPayäº‘å‡½æ•° in cloud/functions/wechatPay/index.js
- [ ] T041 [P] [US2] å®ç°paymentCallbackäº‘å‡½æ•° in cloud/functions/paymentCallback/index.js (åŒ…å«ç­¾åéªŒè¯ã€è®¢å•å·æ ¡éªŒã€å¹‚ç­‰æ€§å¤„ç†)

#### å‰ç«¯å±‚
- [ ] T042 [P] [US2] åˆ›å»ºè´­ç‰©è½¦é¡µé¢ in miniprogram/pages/cart/
- [ ] T043 [P] [US2] åˆ›å»ºè®¢å•ç¡®è®¤é¡µé¢ in miniprogram/pages/order/confirm/
- [ ] T044 [P] [US2] åˆ›å»ºæ”¯ä»˜é¡µé¢ in miniprogram/pages/order/payment/
- [ ] T045 [P] [US2] åˆ›å»ºæ”¯ä»˜ç»“æœé¡µé¢ in miniprogram/pages/order/result/

#### é›†æˆå’Œä¼˜åŒ–
- [ ] T046 [US2] æ·»åŠ è®¢å•é‡‘é¢è®¡ç®—å’ŒéªŒè¯
- [ ] T047 [US2] å®ç°åº“å­˜é¢„ç•™æœºåˆ¶ (é˜²æ­¢è¶…å–)
- [ ] T048 [US2] æ·»åŠ æ”¯ä»˜è¶…æ—¶å¤„ç† (15åˆ†é’Ÿè‡ªåŠ¨å–æ¶ˆ)
- [ ] T049 [US2] æ·»åŠ è®¢å•æ“ä½œçš„å®¡è®¡æ—¥å¿—

**æ£€æŸ¥ç‚¹**: æ­¤æ—¶ï¼Œç”¨æˆ·æ•…äº‹1å’Œ2éƒ½åº”è¯¥ç‹¬ç«‹å·¥ä½œ

---

## é˜¶æ®µ5: ç”¨æˆ·æ•…äº‹3 - æ”¯ä»˜å›è°ƒå’Œè®¢å•çŠ¶æ€æµç¨‹ (ä¼˜å…ˆçº§: P1)

**ç›®æ ‡**: ç³»ç»Ÿé€šè¿‡äº‘webhookè‡ªåŠ¨å¤„ç†å¾®ä¿¡æ”¯ä»˜å¹³å°é€šçŸ¥ï¼Œæ›´æ–°è®¢å•çŠ¶æ€ï¼Œæ— éœ€å‰ç«¯ä¾èµ–
**ç‹¬ç«‹æµ‹è¯•**: å¯é€šè¿‡æ¨¡æ‹Ÿå¾®ä¿¡webhookå›è°ƒã€éªŒè¯è®¢å•çŠ¶æ€è½¬æ¢æ­£ç¡®å¤„ç†å®Œæ•´æµ‹è¯•

### ç”¨æˆ·æ•…äº‹3æµ‹è¯• (TDDå¼ºåˆ¶æ‰§è¡Œ) âš ï¸

- [ ] T050 [P] [US3] æ”¯ä»˜å›è°ƒå¤„ç†APIåˆçº¦æµ‹è¯• in tests/contract/test_payment_callback.js
- [ ] T051 [P] [US3] è®¢å•çŠ¶æ€æ›´æ–°é›†æˆæµ‹è¯• in tests/integration/test_order_status_flow.js

### ç”¨æˆ·æ•…äº‹3å®ç°

#### äº‘å‡½æ•°å±‚
- [ ] T052 [P] [US3] å¢å¼ºpaymentCallbackäº‘å‡½æ•° (å¼‚æ­¥webhookå¤„ç†) in cloud/functions/paymentCallback/index.js
- [ ] T053 [P] [US3] å®ç°updateOrderStatusäº‘å‡½æ•° in cloud/functions/updateOrderStatus/index.js
- [ ] T054 [P] [US3] å®ç°getOrdersäº‘å‡½æ•° in cloud/functions/getOrders/index.js
- [ ] T055 [P] [US3] å®ç°getOrderDetailäº‘å‡½æ•° in cloud/functions/getOrderDetail/index.js

#### å‰ç«¯å±‚
- [ ] T056 [P] [US3] åˆ›å»ºè®¢å•å†å²é¡µé¢ in miniprogram/pages/user/orders/
- [ ] T057 [P] [US3] å®Œå–„è®¢å•è¯¦æƒ…é¡µé¢ in miniprogram/pages/order/detail/

#### é›†æˆå’Œä¼˜åŒ–
- [ ] T058 [US3] å®ç°æ”¯ä»˜å›è°ƒå¹‚ç­‰æ€§å¤„ç†
- [ ] T059 [US3] æ·»åŠ æ”¯ä»˜å¤±è´¥é‡è¯•æœºåˆ¶
- [ ] T060 [US3] å®ç°è®¢å•çŠ¶æ€å®æ—¶åŒæ­¥
- [ ] T061 [US3] æ·»åŠ æ”¯ä»˜çŠ¶æ€é€šçŸ¥åŠŸèƒ½

**æ£€æŸ¥ç‚¹**: æ‰€æœ‰ç”¨æˆ·æ•…äº‹éƒ½åº”è¯¥ç‹¬ç«‹åŠŸèƒ½åŒ–

---

## é˜¶æ®µ6: ç”¨æˆ·æ•…äº‹4 - ç¤¾åŒºåˆ†äº«ä¸å†…å®¹å®¡æ ¸ (ä¼˜å…ˆçº§: P2)

**ç›®æ ‡**: ç”¨æˆ·å¯ä»¥æäº¤å…³äºèŒ¶ä½“éªŒçš„å›¾ç‰‡/æ–‡æœ¬ç¤¾åŒºå¸–å­ï¼Œç³»ç»Ÿåœ¨å‘å¸ƒå‰å¼ºåˆ¶æ‰§è¡Œå†…å®¹å®‰å…¨å®¡æ ¸
**ç‹¬ç«‹æµ‹è¯•**: å¯é€šè¿‡æäº¤å„ç§å†…å®¹ç±»å‹(æ–‡æœ¬ã€å›¾ç‰‡)ã€éªŒè¯å®¡æ ¸å·¥ä½œæµç¨‹æ­£ç¡®å¤„ç†å®Œæ•´æµ‹è¯•

### ç”¨æˆ·æ•…äº‹4æµ‹è¯• (TDDå¼ºåˆ¶æ‰§è¡Œ) âš ï¸

- [ ] T062 [P] [US4] ç¤¾åŒºå¸–å­APIåˆçº¦æµ‹è¯• in tests/contract/test_community_posts.js
- [ ] T063 [P] [US4] å†…å®¹å®¡æ ¸é›†æˆæµ‹è¯• in tests/integration/test_content_moderation.js

### ç”¨æˆ·æ•…äº‹4å®ç°

#### æ•°æ®æ¨¡å‹å±‚
- [ ] T064 [P] [US4] åˆ›å»ºCommunityPostæ¨¡å‹ in cloud/src/models/CommunityPost.js
- [ ] T065 [P] [US4] åˆ›å»ºCommentæ¨¡å‹ in cloud/src/models/Comment.js

#### äº‘å‡½æ•°å±‚
- [ ] T066 [P] [US4] å®ç°managePostäº‘å‡½æ•° in cloud/functions/managePost/index.js
- [ ] T067 [P] [US4] å®ç°getPostsäº‘å‡½æ•° in cloud/functions/getPosts/index.js
- [ ] T068 [P] [US4] å®ç°moderateContentäº‘å‡½æ•° in cloud/functions/moderateContent/index.js (é›†æˆè…¾è®¯äº‘å†…å®¹å®‰å…¨API)
- [ ] T069 [P] [US4] å®ç°manageCommentäº‘å‡½æ•° in cloud/functions/manageComment/index.js

#### å‰ç«¯å±‚
- [ ] T070 [P] [US4] åˆ›å»ºç¤¾åŒºå¸–å­åˆ—è¡¨é¡µé¢ in miniprogram/pages/community/posts/
- [ ] T071 [P] [US4] åˆ›å»ºå¸–å­è¯¦æƒ…é¡µé¢ in miniprogram/pages/community/post-detail/
- [ ] T072 [P] [US4] åˆ›å»ºå‘å¸ƒå¸–å­é¡µé¢ in miniprogram/pages/community/publish/

#### é›†æˆå’Œä¼˜åŒ–
- [ ] T073 [US4] é›†æˆè…¾è®¯äº‘å†…å®¹å®‰å…¨API (æ–‡æœ¬å’Œå›¾ç‰‡å®¡æ ¸)
- [ ] T074 [US4] å®ç°è‡ªåŠ¨å®¡æ ¸ + äººå·¥å®¡æ ¸å·¥ä½œæµç¨‹
- [ ] T075 [US4] æ·»åŠ å†…å®¹ç¼“å­˜å’Œæ‰¹é‡æ£€æµ‹ä¼˜åŒ–
- [ ] T076 [US4] å®ç°å¸–å­äº’åŠ¨åŠŸèƒ½ (ç‚¹èµã€è¯„è®ºã€åˆ†äº«)

---

## é˜¶æ®µ7: ç”¨æˆ·æ•…äº‹5 - ç§¯åˆ†å…‘æ¢ç³»ç»Ÿ (ä¼˜å…ˆçº§: P2)

**ç›®æ ‡**: ç”¨æˆ·å¯ä»¥é€šè¿‡åŸå­äº‹åŠ¡æ“ä½œå…‘æ¢ç´¯ç§¯ç§¯åˆ†è·å–äº§å“æˆ–ä¼˜æƒ åˆ¸ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§
**ç‹¬ç«‹æµ‹è¯•**: å¯é€šè¿‡æ¨¡æ‹Ÿç§¯åˆ†å…‘æ¢åœºæ™¯ã€éªŒè¯åŸå­äº‹åŠ¡è¡Œä¸ºå®Œæ•´æµ‹è¯•

### ç”¨æˆ·æ•…äº‹5æµ‹è¯• (TDDå¼ºåˆ¶æ‰§è¡Œ) âš ï¸

- [ ] T077 [P] [US5] ç§¯åˆ†äº¤æ˜“APIåˆçº¦æµ‹è¯• in tests/contract/test_points_transaction.js
- [ ] T078 [P] [US5] ç§¯åˆ†å…‘æ¢é›†æˆæµ‹è¯• in tests/integration/test_points_redemption.js

### ç”¨æˆ·æ•…äº‹5å®ç°

#### æ•°æ®æ¨¡å‹å±‚
- [ ] T079 [P] [US5] åˆ›å»ºPointsTransactionæ¨¡å‹ in cloud/src/models/PointsTransaction.js
- [ ] T080 [P] [US5] æ‰©å±•Useræ¨¡å‹ (ç§¯åˆ†å­—æ®µ) in cloud/src/models/User.js

#### äº‘å‡½æ•°å±‚
- [ ] T081 [P] [US5] å®ç°getUserInfoäº‘å‡½æ•° in cloud/functions/getUserInfo/index.js
- [ ] T082 [P] [US5] å®ç°getPointsHistoryäº‘å‡½æ•° in cloud/functions/getPointsHistory/index.js
- [ ] T083 [P] [US5] å®ç°redeemPointsäº‘å‡½æ•° in cloud/functions/redeemPoints/index.js (åŸå­äº‹åŠ¡æ“ä½œ)

#### å‰ç«¯å±‚
- [ ] T084 [P] [US5] åˆ›å»ºç”¨æˆ·ä¸­å¿ƒé¡µé¢ in miniprogram/pages/user/profile/
- [ ] T085 [P] [US5] åˆ›å»ºç§¯åˆ†ä¸­å¿ƒé¡µé¢ in miniprogram/pages/user/points/
- [ ] T086 [P] [US5] åˆ›å»ºåœ°å€ç®¡ç†é¡µé¢ in miniprogram/pages/user/address/

#### é›†æˆå’Œä¼˜åŒ–
- [ ] T087 [US5] å®ç°ç§¯åˆ†è·å¾—å’Œä½¿ç”¨çš„äº‹åŠ¡æ€§æ“ä½œ
- [ ] T088 [US5] æ·»åŠ ç§¯åˆ†ä½™é¢å®æ—¶æ ¡éªŒ
- [ ] T089 [US5] å®ç°ç§¯åˆ†è¿‡æœŸæœºåˆ¶
- [ ] T090 [US5] æ·»åŠ ç§¯åˆ†ä½¿ç”¨é™åˆ¶ (æœ€ä½è®¢å•é‡‘é¢ã€æœ€å¤§ä½¿ç”¨æ¯”ä¾‹)

---

## é˜¶æ®µ8: ç”¨æˆ·æ•…äº‹6 - ç®¡ç†å‘˜è®¤è¯ä¸è®¿é—®æ§åˆ¶ (ä¼˜å…ˆçº§: P1)

**ç›®æ ‡**: ç®¡ç†ç”¨æˆ·å¯é€šè¿‡å¾®ä¿¡èº«ä»½éªŒè¯ä½¿ç”¨openidç™½åå•å’ŒåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶(RBAC)è®¿é—®ç®¡ç†åŠŸèƒ½
**ç‹¬ç«‹æµ‹è¯•**: å¯é€šè¿‡æ¨¡æ‹Ÿå„ç§openidå€¼çš„ç®¡ç†å‘˜ç™»å½•å°è¯•ã€éªŒè¯RBACæƒé™æ­£ç¡®æ‰§è¡Œå®Œæ•´æµ‹è¯•

### ç”¨æˆ·æ•…äº‹6æµ‹è¯• (TDDå¼ºåˆ¶æ‰§è¡Œ) âš ï¸

- [ ] T091 [P] [US6] ç®¡ç†å‘˜è®¤è¯APIåˆçº¦æµ‹è¯• in tests/contract/test_admin_auth.js
- [ ] T092 [P] [US6] RBACæƒé™æ§åˆ¶é›†æˆæµ‹è¯• in tests/integration/test_rbac_permissions.js

### ç”¨æˆ·æ•…äº‹6å®ç°

#### æ•°æ®æ¨¡å‹å±‚
- [ ] T093 [P] [US6] åˆ›å»ºAdminUseræ¨¡å‹ in cloud/src/models/AdminUser.js

#### äº‘å‡½æ•°å±‚
- [ ] T094 [P] [US6] å®ç°adminAuthäº‘å‡½æ•° in cloud/functions/adminAuth/index.js (openidç™½åå•æ£€æŸ¥å’ŒRBACæˆæƒé€»è¾‘)
- [ ] T095 [P] [US6] å®ç°manageAdminSessionäº‘å‡½æ•° in cloud/functions/manageAdminSession/index.js

#### å‰ç«¯å±‚
- [ ] T096 [P] [US6] åˆ›å»ºç®¡ç†å‘˜ç™»å½•é¡µé¢ in miniprogram/pages/admin/login/
- [ ] T097 [P] [US6] åˆ›å»ºç®¡ç†åå°ä¸»é¡µé¢ in miniprogram/pages/admin/dashboard/

#### é›†æˆå’Œä¼˜åŒ–
- [ ] T098 [US6] å®ç°åŸºäºå¾®ä¿¡OpenIDçš„èº«ä»½éªŒè¯
- [ ] T099 [US6] å®ç°å¤šè§’è‰²æƒé™æ§åˆ¶ç³»ç»Ÿ
- [ ] T100 [US6] æ·»åŠ ç®¡ç†å‘˜æ“ä½œå®¡è®¡æ—¥å¿—
- [ ] T101 [US6] å®ç°ä¼šè¯å®‰å…¨ (è‡ªåŠ¨è¶…æ—¶ã€å¼ºåˆ¶ç™»å‡º)

---

## é˜¶æ®µ9: ç”¨æˆ·æ•…äº‹7 - ç®¡ç†å‘˜äº§å“ç®¡ç†ä¸è§„æ ¼é…ç½® (ä¼˜å…ˆçº§: P1)

**ç›®æ ‡**: ç®¡ç†ç”¨æˆ·å¯ä»¥é€šè¿‡å¤šæ­¥éª¤è¡¨å•æ‰§è¡ŒèŒ¶å¶äº§å“CRUDæ“ä½œå¹¶é…ç½®è§„æ ¼ç±»å‹ï¼Œä¸ºåº“å­˜å’Œä»·æ ¼ç®¡ç†ç”Ÿæˆå®Œæ•´SKUçŸ©é˜µ
**ç‹¬ç«‹æµ‹è¯•**: å¯é€šè¿‡ç®¡ç†å‘˜ç•Œé¢åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤äº§å“ã€éªŒè¯SKUçŸ©é˜µç”Ÿæˆæ­£ç¡®å¤„ç†å®Œæ•´æµ‹è¯•

### ç”¨æˆ·æ•…äº‹7æµ‹è¯• (TDDå¼ºåˆ¶æ‰§è¡Œ) âš ï¸

- [ ] T102 [P] [US7] äº§å“ç®¡ç†APIåˆçº¦æµ‹è¯• in tests/contract/test_product_management.js
- [ ] T103 [P] [US7] SKUçŸ©é˜µç”Ÿæˆé›†æˆæµ‹è¯• in tests/integration/test_sku_matrix_generation.js

### ç”¨æˆ·æ•…äº‹7å®ç°

#### äº‘å‡½æ•°å±‚
- [ ] T104 [P] [US7] å®ç°productCreateäº‘å‡½æ•° in cloud/functions/admin/productCreate/index.js
- [ ] T105 [P] [US7] å®ç°productUpdateäº‘å‡½æ•° in cloud/functions/admin/productUpdate/index.js
- [ ] T106 [P] [US7] å®ç°productDeleteäº‘å‡½æ•° in cloud/functions/admin/productDelete/index.js
- [ ] T107 [P] [US7] å®ç°generateSKUMatrixäº‘å‡½æ•° in cloud/functions/admin/generateSKUMatrix/index.js

#### å‰ç«¯å±‚
- [ ] T108 [P] [US7] åˆ›å»ºäº§å“ç®¡ç†é¡µé¢ in miniprogram/pages/admin/products/
- [ ] T109 [US7] å®ç°äº§å“å¤šæ­¥éª¤è¡¨å•ç»„ä»¶ in miniprogram/components/admin/product-form/
- [ ] T110 [US7] å®ç°åŠ¨æ€SKUçŸ©é˜µç”Ÿæˆç»„ä»¶ in miniprogram/components/admin/sku-matrix/
- [ ] T111 [P] [US7] åˆ›å»ºäº§å“ç®¡ç†æ“ä½œæ—¥å¿—é¡µé¢ in miniprogram/pages/admin/logs/

#### é›†æˆå’Œä¼˜åŒ–
- [ ] T112 [US7] å®ç°ä¸¥æ ¼çš„æ•°æ®SchemaéªŒè¯
- [ ] T113 [US7] æ·»åŠ RBACæƒé™æ£€æŸ¥ (äº§å“ç®¡ç†æƒé™)
- [ ] T114 [US7] å®ç°äº§å“è§„æ ¼é…ç½®å’ŒSKUçŸ©é˜µçš„è‡ªåŠ¨ç”Ÿæˆ
- [ ] T115 [US7] æ·»åŠ äº§å“å›¾ç‰‡ä¸Šä¼ å’Œç®¡ç†åŠŸèƒ½

---

## é˜¶æ®µ10: æ”¶å°¾å·¥ä½œä¸è·¨é¢†åŸŸå…³æ³¨ç‚¹

**ç›®æ ‡**: å½±å“å¤šä¸ªç”¨æˆ·æ•…äº‹çš„æ”¹è¿›

- [ ] T116 [P] æ›´æ–°é¡¹ç›®æ–‡æ¡£ in docs/
- [ ] T117 [P] ä»£ç æ¸…ç†å’Œé‡æ„
- [ ] T118 [P] è·¨æ‰€æœ‰æ•…äº‹çš„æ€§èƒ½ä¼˜åŒ–
- [ ] T119 [P] é¢å¤–çš„å•å…ƒæµ‹è¯• (åœ¨tests/unit/ä¸­)
- [ ] T120 [P] å®‰å…¨åŠ å›º
- [ ] T121 [P] è¿è¡Œquickstart.mdéªŒè¯
- [ ] T122 [P] å®ç°å®Œæ•´çš„é”™è¯¯ç›‘æ§å’ŒæŠ¥è­¦ç³»ç»Ÿ
- [ ] T123 [P] æ·»åŠ æ•°æ®åˆ†æç»Ÿè®¡åŠŸèƒ½
- [ ] T124 [P] æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–
- [ ] T125 [P] å®Œæˆéƒ¨ç½²é…ç½®å’ŒCI/CDæµç¨‹

---

## ä¾èµ–å…³ç³»ä¸æ‰§è¡Œé¡ºåº

### é˜¶æ®µä¾èµ–å…³ç³»

- **è®¾ç½®é˜¶æ®µ (é˜¶æ®µ1)**: æ— ä¾èµ– - å¯ç«‹å³å¼€å§‹
- **åŸºç¡€è®¾æ–½é˜¶æ®µ (é˜¶æ®µ2)**: ä¾èµ–è®¾ç½®å®Œæˆ - é˜»å¡æ‰€æœ‰ç”¨æˆ·æ•…äº‹
- **ç”¨æˆ·æ•…äº‹ (é˜¶æ®µ3+)**: ä¾èµ–åŸºç¡€è®¾æ–½å®Œæˆ
  - ç”¨æˆ·æ•…äº‹å¯éšåå¹¶è¡Œè¿›è¡Œ (å¦‚æœæœ‰å›¢é˜Ÿæ”¯æŒ)
  - æˆ–æŒ‰ä¼˜å…ˆçº§é¡ºåºè¿›è¡Œ (P1 â†’ P2 â†’ P3)
- **æ”¶å°¾é˜¶æ®µ (æœ€ç»ˆé˜¶æ®µ)**: ä¾èµ–æ‰€æœ‰æœŸæœ›çš„ç”¨æˆ·æ•…äº‹å®Œæˆ

### ç”¨æˆ·æ•…äº‹ä¾èµ–å…³ç³»

- **ç”¨æˆ·æ•…äº‹1 (P1)**: åŸºç¡€è®¾æ–½å®Œæˆåå¯å¼€å§‹ - æ— å…¶ä»–æ•…äº‹ä¾èµ–
- **ç”¨æˆ·æ•…äº‹2 (P2)**: åŸºç¡€è®¾æ–½å®Œæˆåå¯å¼€å§‹ - å¯ä¸US1é›†æˆä½†åº”ç‹¬ç«‹å¯æµ‹è¯•
- **ç”¨æˆ·æ•…äº‹3 (P3)**: åŸºç¡€è®¾æ–½å®Œæˆåå¯å¼€å§‹ - å¯ä¸US1/US2é›†æˆä½†åº”ç‹¬ç«‹å¯æµ‹è¯•
- **ç”¨æˆ·æ•…äº‹4 (P2)**: åŸºç¡€è®¾æ–½å®Œæˆåå¯å¼€å§‹ - å¯ä¸æ—©æœŸæ•…äº‹é›†æˆä½†åº”ç‹¬ç«‹å¯æµ‹è¯•
- **ç”¨æˆ·æ•…äº‹5 (P2)**: åŸºç¡€è®¾æ–½å®Œæˆåå¯å¼€å§‹ - å¯ä¸æ—©æœŸæ•…äº‹é›†æˆä½†åº”ç‹¬ç«‹å¯æµ‹è¯•
- **ç”¨æˆ·æ•…äº‹6 (P1)**: åŸºç¡€è®¾æ–½å®Œæˆåå¯å¼€å§‹ - æ— å…¶ä»–æ•…äº‹ä¾èµ–
- **ç”¨æˆ·æ•…äº‹7 (P1)**: åŸºç¡€è®¾æ–½å®Œæˆåå¯å¼€å§‹ - æ— å…¶ä»–æ•…äº‹ä¾èµ–

### æ¯ä¸ªç”¨æˆ·æ•…äº‹å†…éƒ¨

- æµ‹è¯• (å¦‚æœåŒ…å«) å¿…é¡»å…ˆç¼–å†™å¹¶åœ¨å®ç°å‰å¤±è´¥
- æ¨¡å‹åœ¨æœåŠ¡ä¹‹å‰
- æœåŠ¡åœ¨ç«¯ç‚¹ä¹‹å‰
- æ ¸å¿ƒå®ç°åœ¨é›†æˆä¹‹å‰
- æ•…äº‹å®Œæˆå‰è½¬åˆ°ä¸‹ä¸€ä¸ªä¼˜å…ˆçº§

### å¹¶è¡Œæœºä¼š

- æ‰€æœ‰æ ‡è®°[P]çš„è®¾ç½®ä»»åŠ¡å¯ä»¥å¹¶è¡Œè¿è¡Œ
- åŸºç¡€è®¾æ–½é˜¶æ®µå†…æ‰€æœ‰æ ‡è®°[P]çš„ä»»åŠ¡å¯ä»¥å¹¶è¡Œè¿è¡Œ
- åŸºç¡€è®¾æ–½é˜¶æ®µå®Œæˆåï¼Œå¦‚æœå›¢é˜Ÿå®¹é‡å…è®¸ï¼Œæ‰€æœ‰ç”¨æˆ·æ•…äº‹å¯ä»¥å¹¶è¡Œå¼€å§‹
- ç”¨æˆ·æ•…äº‹å†…æ‰€æœ‰æ ‡è®°[P]çš„æµ‹è¯•å¯ä»¥å¹¶è¡Œè¿è¡Œ
- ç”¨æˆ·æ•…äº‹å†…æ ‡è®°[P]çš„æ¨¡å‹å¯ä»¥å¹¶è¡Œè¿è¡Œ
- ä¸åŒç”¨æˆ·æ•…äº‹å¯ç”±ä¸åŒå›¢é˜Ÿæˆå‘˜å¹¶è¡Œè¿›è¡Œ

---

## å¹¶è¡Œç¤ºä¾‹: ç”¨æˆ·æ•…äº‹1

```bash
# ä¸€èµ·å¯åŠ¨ç”¨æˆ·æ•…äº‹1çš„æ‰€æœ‰æµ‹è¯• (å¦‚æœè¯·æ±‚äº†æµ‹è¯•):
Task: "Contract test for products API in tests/contract/test_products_api.js"
Task: "Contract test for SKU inventory in tests/contract/test_sku_inventory.js"
Task: "Integration test for product detail in tests/integration/test_product_detail.js"

# ä¸€èµ·å¯åŠ¨ç”¨æˆ·æ•…äº‹1çš„æ‰€æœ‰æ¨¡å‹:
Task: "Create TeaProduct model in cloud/src/models/TeaProduct.js"
Task: "Create SKU model in cloud/src/models/SKU.js"
```

---

## å®æ–½ç­–ç•¥

### MVPä¼˜å…ˆ (ä»…ç”¨æˆ·æ•…äº‹1)

1. å®Œæˆé˜¶æ®µ1: è®¾ç½®
2. å®Œæˆé˜¶æ®µ2: åŸºç¡€è®¾æ–½ (å…³é”® - é˜»å¡æ‰€æœ‰æ•…äº‹)
3. å®Œæˆé˜¶æ®µ3: ç”¨æˆ·æ•…äº‹1 (äº§å“å‘ç°ä¸é€‰æ‹©)
4. **åœæ­¢å¹¶éªŒè¯**: ç‹¬ç«‹æµ‹è¯•ç”¨æˆ·æ•…äº‹1
5. å¦‚æœå°±ç»ªåˆ™éƒ¨ç½²/æ¼”ç¤º

### å¢é‡äº¤ä»˜

1. å®Œæˆè®¾ç½® + åŸºç¡€è®¾æ–½ â†’ åŸºç¡€å°±ç»ª
2. æ·»åŠ ç”¨æˆ·æ•…äº‹1 â†’ ç‹¬ç«‹æµ‹è¯• â†’ éƒ¨ç½²/æ¼”ç¤º (MVP!)
3. æ·»åŠ ç”¨æˆ·æ•…äº‹2 â†’ ç‹¬ç«‹æµ‹è¯• â†’ éƒ¨ç½²/æ¼”ç¤º
4. æ·»åŠ ç”¨æˆ·æ•…äº‹3 â†’ ç‹¬ç«‹æµ‹è¯• â†’ éƒ¨ç½²/æ¼”ç¤º
5. æ¯ä¸ªæ•…äº‹åœ¨ä¸ç ´åä¹‹å‰æ•…äº‹çš„æƒ…å†µä¸‹å¢åŠ ä»·å€¼

### å¹¶è¡Œå›¢é˜Ÿç­–ç•¥

å¤šä¸ªå¼€å‘äººå‘˜çš„æƒ…å†µä¸‹:

1. å›¢é˜Ÿä¸€èµ·å®Œæˆè®¾ç½® + åŸºç¡€è®¾æ–½
2. åŸºç¡€è®¾æ–½å®Œæˆå:
   - å¼€å‘äººå‘˜A: ç”¨æˆ·æ•…äº‹1 (äº§å“å‘ç°)
   - å¼€å‘äººå‘˜B: ç”¨æˆ·æ•…äº‹2 (æ”¯ä»˜ç³»ç»Ÿ)
   - å¼€å‘äººå‘˜C: ç”¨æˆ·æ•…äº‹6 (ç®¡ç†å‘˜ç³»ç»Ÿ)
3. æ•…äº‹ç‹¬ç«‹å®Œæˆå¹¶é›†æˆ

---

## å¤‡æ³¨

- [P] ä»»åŠ¡ = ä¸åŒæ–‡ä»¶ï¼Œæ— ä¾èµ–å…³ç³»
- [ç”¨æˆ·æ•…äº‹] æ ‡ç­¾å°†ä»»åŠ¡æ˜ å°„åˆ°ç‰¹å®šç”¨æˆ·æ•…äº‹ä»¥ä¾¿è¿½è¸ª
- æ¯ä¸ªç”¨æˆ·æ•…äº‹åº”è¯¥ç‹¬ç«‹å®Œæˆä¸”å¯ç‹¬ç«‹æµ‹è¯•
- åœ¨å®ç°å‰éªŒè¯æµ‹è¯•å¤±è´¥
- åœ¨æ¯ä¸ªä»»åŠ¡æˆ–é€»è¾‘ç»„å®Œæˆåæäº¤
- åœ¨ä»»ä½•æ£€æŸ¥ç‚¹åœæ­¢ä»¥ç‹¬ç«‹éªŒè¯æ•…äº‹
- é¿å…: æ¨¡ç³Šä»»åŠ¡ï¼Œç›¸åŒæ–‡ä»¶å†²çªï¼Œç ´åç‹¬ç«‹æ€§çš„è·¨æ•…äº‹ä¾èµ–

## ç»Ÿè®¡æ‘˜è¦

- **æ€»ä»»åŠ¡æ•°**: 125
- **æŒ‰ç”¨æˆ·æ•…äº‹çš„ä»»åŠ¡æ•°**:
  - US1 (äº§å“å‘ç°): 20ä¸ªä»»åŠ¡
  - US2 (æ”¯ä»˜åˆ›å»º): 16ä¸ªä»»åŠ¡
  - US3 (æ”¯ä»˜å›è°ƒ): 12ä¸ªä»»åŠ¡
  - US4 (ç¤¾åŒºå†…å®¹): 15ä¸ªä»»åŠ¡
  - US5 (ç§¯åˆ†ç³»ç»Ÿ): 13ä¸ªä»»åŠ¡
  - US6 (ç®¡ç†å‘˜è®¤è¯): 10ä¸ªä»»åŠ¡
  - US7 (äº§å“ç®¡ç†): 13ä¸ªä»»åŠ¡
- **è®¾ç½®é˜¶æ®µ**: 5ä¸ªä»»åŠ¡
- **åŸºç¡€è®¾æ–½é˜¶æ®µ**: 8ä¸ªä»»åŠ¡
- **æ”¶å°¾é˜¶æ®µ**: 10ä¸ªä»»åŠ¡

### å»ºè®®çš„MVPèŒƒå›´ (ä»…ç”¨æˆ·æ•…äº‹1å’Œ6)

ä¼˜å…ˆå®æ–½ä»¥ä¸‹ä»¥è·å¾—å¯è¿è¡Œçš„MVP:
1. é˜¶æ®µ1-2: è®¾ç½®å’ŒåŸºç¡€è®¾æ–½ (13ä¸ªä»»åŠ¡)
2. é˜¶æ®µ3: ç”¨æˆ·æ•…äº‹1 (20ä¸ªä»»åŠ¡)
3. é˜¶æ®µ8: ç”¨æˆ·æ•…äº‹6 (10ä¸ªä»»åŠ¡)

**æ€»è®¡MVPä»»åŠ¡**: 43ä¸ªä»»åŠ¡ (çº¦34%çš„æ€»å·¥ä½œé‡)